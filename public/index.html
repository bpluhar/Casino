<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>POOP CASINO</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css">
  </head>

<body>

  <div class="modal" id="walletModal">
    <div class="modal-background"></div>
    <div class="modal-card">
      <header class="modal-card-head">
        <p class="modal-card-title">Poop Wallet</p>
      </header>
      <section class="modal-card-body">
        <!-- Content ... -->
      </section>
      <footer class="modal-card-foot">
        <button class="button is-info" id="walletModalCloseButton">Close</button>
      </footer>
    </div>
  </div>

  <nav class="navbar is-transparent" role="navigation" aria-label="main navigation">
    <div class="navbar-brand">
      <a class="navbar-item" href="/home">
        <img src="https://i.imgur.com/V2JFAbG.png" width="100" height="120">
      </a>

      <a role="button" class="navbar-burger" aria-label="menu" aria-expanded="false" data-target="navbarBasicExample">
        <span aria-hidden="true"></span>
        <span aria-hidden="true"></span>
        <span aria-hidden="true"></span>
      </a>
    </div>

    <div id="navbarBasicExample" class="navbar-menu">
      <div class="navbar-start">
        <a class="navbar-item" href="/home">
          Home
        </a>

        <a class="navbar-item">
          Account
        </a>

        <div class="level-item">

          <button class="button is-info" id="debugBetTrackerButton">Test Chat</button>

        </div>

      </div>

      <div class="navbar-end">
        <div class="navbar-item">
          <div class="buttons">
            <a class="button is-primary">
              <strong>Sign up</strong>
            </a>
            <a class="button is-light">
              Log in
            </a>
          </div>
        </div>
      </div>
    </div>
  </nav>

  <section class="section" style="height: calc(100% - 56px); padding: .5rem 1.5rem">      
      <div class="columns is-mobile" style="height: 100%;">

        <!-- Left 1/4 of container -->
        <div class="column is-2">
          <div class="box" style="height: 100%">

            <aside class="menu">

              <p class="menu-label">Games</p>
              <ul class="menu-list">
                <li><a href="/blackjack">Blackjack</a></li>
                <li><a href="/crash">Crash</a></li>
                <li><a href="/hilo">Hi/Lo</a></li>
                <li><a href="/coinflip">Coin Flip</a></li>
              </ul>

              <p class="menu-label">Stats</p>
              <ul class="menu-list">
                <li><a href="/stats">Personal Stats</a></li>
                <li><a href="/leaderboard">Leaderboard</a></li>
              </ul>


            </aside>

          </div>
        </div>

        <div class="column">
          <div class="box" style="height: 100%">
            
            <!-- Main container -->

            <!-- NavBar Block -->
            <div class="block">
              <div class="notification is-warning is-light"> When using the <strong>Test Chat</strong> button in the navbar, be sure to test with multiple tabs open on this same page to see the webkit in action! The button currently creates <strong>100</strong> different messages and sends them in <strong>100</strong> seperate io.emit() calls. The rng for chat generation is <a href="https://developer.mozilla.org/en-US/docs/Web/API/Crypto/getRandomValues">available here</a>.</div>
            </div>

            <!-- Top Stats Block -->
            <div class="block">
              <nav class="level">
                <div class="level-item has-text-centered">
                  <div>
                    <p class="heading">Total Poop Pile</p>
                    <p class="title is-spaced">123,503,490</p>
                    <table class="table is-narrow has-text-left">
                      <thead>
                        <tr>
                          <th>Rank</th>
                          <th>User</th>
                          <th>Age (years)</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr>
                          <th>1</th>
                          <td><a>Amulite</a>
                          </td>
                          <td>38</td>
                        </tr>
                        <tr>
                          <th>2</th>
                          <td><a>Arsenal</a></td>
                          <td>38</td>
                        </tr>
                        <tr>
                          <th>3</th>
                          <td><a>Tottenham Hotspur</a></td>
                          <td>38</td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>

                <div class="level-item has-text-centered">
                  <div>
                    <p class="heading">Total Poop Wagered</p>
                    <p class="title is-spaced">12,350,349</p>
                    <table class="table is-narrow has-text-left">
                      <thead>
                        <tr>
                          <th>Rank</th>
                          <th>User</th>
                          <th>Total Bets</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr>
                          <th>1</th>
                          <td><a>Amulite</a>
                          </td>
                          <td>38</td>
                        </tr>
                        <tr>
                          <th>2</th>
                          <td><a>Arsenal</a></td>
                          <td>38</td>
                        </tr>
                        <tr>
                          <th>3</th>
                          <td><a>Tottenham Hotspur</a></td>
                          <td>38</td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>

                <div class="level-item has-text-centered">
                  <div>
                    <p class="heading">Total Poop Won</p>
                    <p class="title">3,864,560</p>
                    <table class="table is-narrow has-text-left">
                      <thead>
                        <tr>
                          <th>Rank</th>
                          <th>User</th>
                          <th>Win</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr>
                          <th>1</th>
                          <td><a>Amulite</a>
                          </td>
                          <td>38</td>
                        </tr>
                        <tr>
                          <th>2</th>
                          <td><a>Arsenal</a></td>
                          <td>38</td>
                        </tr>
                        <tr>
                          <th>3</th>
                          <td><a>Tottenham Hotspur</a></td>
                          <td>38</td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>

                <div class="level-item has-text-centered">
                  <div>
                    <p class="heading">Total Poop Lost</p>
                    <p class="title">8,485,789</p>
                    <table class="table is-narrow has-text-left">
                      <thead>
                        <tr>
                          <th>Rank</th>
                          <th>User</th>
                          <th>Loss</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr>
                          <th>1</th>
                          <td><a>Amulite</a>
                          </td>
                          <td>38</td>
                        </tr>
                        <tr>
                          <th>2</th>
                          <td><a>Arsenal</a></td>
                          <td>38</td>
                        </tr>
                        <tr>
                          <th>3</th>
                          <td><a>Tottenham Hotspur</a></td>
                          <td>38</td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
              </nav>
            </div>
            <hr />

            <!-- Chat Box Block -->
            <div class="block" style="height: calc(100% - 355px)">

              <div class="box" id="recentBetsBlock" style="height: 100%; overflow: auto;">
                <p>
                  <span class="has-text-weight-bold has-text-black" >[Admin]</span> <span class="has-text-weight-bold">Amulite</span>: <span class="has-text-weight-normal">Knock it off!</span>
                </p>
                <p>
                  <span class="has-text-weight-bold has-text-primary">[Novice]</span> <span class="has-text-weight-bold">Jojo12</span>: <span class="has-text-weight-normal">my fault g!</span>
                </p>
                <p>
                  <span class="has-text-weight-bold has-text-link">[Advanced]</span> <span class="has-text-weight-bold">Jojo12</span>: <span class="has-text-weight-normal">my fault g!</span>
                </p>
                <p>
                  <span class="has-text-weight-bold has-text-warning">[Pro]</span> <span class="has-text-weight-bold">Jojo12</span>: <span class="has-text-weight-normal">my fault g!</span>
                </p>
                <p>
                  <span class="has-text-weight-bold has-text-success">[Insane]</span> <span class="has-text-weight-bold">Jojo12</span>: <span class="has-text-weight-normal">my fault g!</span>
                </p>
                <p>
                  <span class="has-text-weight-bold has-text-danger">[God]</span> <span class="has-text-weight-bold">Jojo12</span>: <span class="has-text-weight-normal">my fault g!</span>
                </p>
                <p>
                  <span class="has-text-weight-bold has-text-danger" id="adminTag">[Ascended]</span> <span class="has-text-weight-bold">Jojo12</span>: <span class="has-text-weight-normal">my fault g!</span>
                </p>
              </div>

            </div>

          </div>
        </div>

      </div>

  </section>



  <style>

    body::-webkit-scrollbar{
      display: none;
    }

    html, body {
      height: 100%;
    }

    span#adminTag {
      background: linear-gradient(to right, #ef5350, #f48fb1, #7e57c2, #2196f3, #26c6da, #43a047, #eeff41, #f9a825, #ff5722);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

  </style>



  <script src="/socket.io/socket.io.js"></script>
  <script src="/safe-rng/safe-rng.js"></script>

  <script>


  const safe = require('safe-rng');


  const socket = io();

  const walletButton = document.getElementById("walletButton");
  const walletModalCloseButton = document.getElementById("walletModalCloseButton");
  const walletModal  = document.getElementById("walletModal");

  const recentBetsBlock = document.getElementById("recentBetsBlock");

  const debugBetTrackerButton = document.getElementById("debugBetTrackerButton")

  debugBetTrackerButton.addEventListener('click', () => {
    socket.emit('debug');
  })

  socket.on('debug', (data) => {
    //console.log(data);
    let p         = document.createElement('p')
    let rankSpan  = document.createElement('span')
    let nameSpan  = document.createElement('span')
    let betSpan   = document.createElement('span')

    rankSpan.classList.add('has-text-weight-bold')

    switch (data[0]) {
      case "Novice":
        rankSpan.classList.add('has-text-primary')
        break;
      case "Advanced":
        rankSpan.classList.add('has-text-link')
        break;
      case "Pro":
        rankSpan.classList.add('has-text-warning')
        break;
      case "Insane":
        rankSpan.classList.add('has-text-success')
        break;
      case "God":
        rankSpan.classList.add('has-text-danger')
      default:
        break;
    }

    nameSpan.classList.add('has-text-weight-bold')
    betSpan.classList.add('has-text-weight-normal')

    rankSpan.textContent  = `[${data[0]}] `;
    nameSpan.textContent  = `${data[1]}: `
    betSpan.textContent   = `${data[2]}`;

    p.appendChild(rankSpan)
    p.appendChild(nameSpan)
    p.appendChild(betSpan)

    recentBetsBlock.insertBefore(p, recentBetsBlock.firstChild)

  })

  walletModalCloseButton.addEventListener('click', () => {
    walletModal.classList.remove('is-active');
  })

  socket.on('connect', () => {
    console.log('Connected!')
  })

  socket.on('disconnect', () => {
    console.log('Lost Connection!')
  })

  ///////////////
  // Functions //
  ///////////////

  </script>
</body>

</html>

